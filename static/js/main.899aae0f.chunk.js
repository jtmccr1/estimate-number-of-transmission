(this["webpackJsonpestimate-number-of-transmission"]=this["webpackJsonpestimate-number-of-transmission"]||[]).push([[0],{73:function(t,e,n){t.exports=n(82)},78:function(t,e,n){},79:function(t,e,n){},80:function(t,e,n){},81:function(t,e,n){},82:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(29),o=n.n(i),s=(n(78),n(4)),p=n(5),c=n(7),l=n(6),u=n(3),m=n(8),d=(n(79),function(t){return r.a.createElement("div",null,r.a.createElement("label",null,t.label),r.a.createElement("input",{type:"range",min:t.min,max:t.max,step:t.step,name:t.name,value:t.value,onChange:function(e){return t.updater(t.stateKey,t.index,e)},className:"sliderSelector"}))}),h=function(t){var e=t.options.map((function(t,e){return r.a.createElement("option",{value:t,key:e},t)})),n={min:1,max:10,step:1,name:"Number of mutations observed",label:"Number of mutations : ".concat(t.numberOfMutations),value:t.numberOfMutations,updater:t.updater,stateKey:"numberOfMutations",index:0},a={min:1,max:50,step:1,name:"Number of days between samples",label:"Number of days: ".concat(t.numberOfDays),value:t.numberOfDays,updater:t.updater,stateKey:"numberOfDays",index:0},i=t.distributionOptions.map((function(t,e){return r.a.createElement("option",{value:t,key:e},t)})),o={LogNormal:[{min:.1,max:5,step:.1,name:"mu",label:"mu: ".concat(t.distributionParameters[0]),value:t.distributionParameters[0],updater:t.updater,stateKey:"distributionParameters",index:0},{min:.1,max:3,step:.1,name:"sigma",label:"sigma: ".concat(t.distributionParameters[1]),value:t.distributionParameters[1],updater:t.updater,stateKey:"distributionParameters",index:1}],Gamma:[{min:1,max:4,step:.5,name:"shape1",label:"shape1: ".concat(t.distributionParameters[0]),value:t.distributionParameters[0],updater:t.updater,stateKey:"distributionParameters",index:0},{min:1,max:5,step:.5,name:"scale",label:"scale: ".concat(t.distributionParameters[1]),value:t.distributionParameters[1],updater:t.updater,stateKey:"distributionParameters",index:1}]}[t.distributionSelection].map((function(t,e){return r.a.createElement(d,Object.assign({},t,{key:e}))})),s="Number of Mutations"===t.selectedOption?n:a;return r.a.createElement("div",null,r.a.createElement(d,{min:5e-4,max:.005,step:1e-5,name:"Evoluonary Rate",label:"Rate of Evolution: ".concat(t.evolutionaryRate," subsitutions/site/year"),value:t.evolutionaryRate,updater:t.updater,stateKey:"evolutionaryRate",index:0}),r.a.createElement(d,{min:1e4,max:32e3,step:50,name:"Genome Length",label:"Genome Length: ".concat(t.genomeLength/1e3," Kb"),value:t.genomeLength,updater:t.updater,stateKey:"genomeLength",index:0}),r.a.createElement("label",null,"Condition on"),r.a.createElement("select",{value:t.selectedOption,onChange:function(e){return t.updater("selectedOption",0,e,!1)}},e),r.a.createElement(d,s),r.a.createElement("label",null,"Probability of transmission overtime"),r.a.createElement("select",{value:t.distributionSelection,onChange:function(e){return t.updater("distributionSelection",0,e,!1)}},i),r.a.createElement("div",null,o))},f=n(1),b=n(2),g=n(9),v={LogNormal:g.lognormal.pdf,Gamma:g.gamma.pdf},y={LogNormal:g.lognormal.cdf,Gamma:g.gamma.cdf},O=function(t,e,n){for(var a=Math.abs(e[0]-e[1])/n,r=0,i=0;i<=n;i++){var o=e[0]+i*a,s=e[0]+i*a;r+=a*(t(o)+t(s))/2}return r},w=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.001,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=[],i=a,o=!0;do{var s={q:i,p:t(i)};r.push(s),i+=e,o=f.e(r,(function(t){return t.p}))<n}while(r[r.length-1].p>n||o);return r},x=function(t,e,n,a,r,i,o){var s,p,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;null!==c?(s=f.b().scale(e).ticks(5).tickValues(c),p=f.c().scale(n).ticks(5)):(s=f.b().scale(e).ticks(5),p=f.c().scale(n).ticks(5)),t.append("g").attr("class","x axis").attr("transform","translate(0,".concat(a[1]-r.top-r.bottom," )")).call(s),t.append("text").attr("transform","translate(".concat(a[0]/2,",").concat(a[1]-r.top-r.bottom+30,")")).style("text-anchor","middle").text(i),t.append("g").attr("class","y axis").attr("transform","translate(".concat(r.left,",0)")).call(p),t.append("text").attr("transform","rotate(-90)").attr("y",r.left-45).attr("x",0-a[1]/2).attr("dy","1em").style("text-anchor","middle").text(o)},P=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(l.a)(e).call(this,t))).drawPlot=n.drawPlot.bind(Object(u.a)(n)),n}return Object(m.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.drawPlot()}},{key:"componentDidUpdate",value:function(){this.drawPlot()}},{key:"drawPlot",value:function(){var t=this,e=b.b((function(t,e,n,a){var r=n*e/365*t;return g.poisson.pdf(a,r)}))(this.props.numberOfDays,this.props.genomeLength,this.props.evolutionaryRate),n=this.props.size[0],a=this.props.size[1],r=this.node,i=f.h(r).style("font","10px sans-serif"),o=w(e),s=f.f().range([this.props.margin.left,n-this.props.margin.left-this.props.margin.right]).padding(.1).domain(o.map((function(t){return t.q}))),p=f.g().range([a-this.props.margin.top-this.props.margin.bottom,this.props.margin.bottom]).domain([0,1]);i.selectAll("g").remove(),i.append("g").attr("transform","translate(".concat(this.props.margin.left,",").concat(this.props.margin.top,")"));var c=i.select("g");x(c,s,p,this.props.size,this.props.margin,"Number of Mutations","Probability"),c.selectAll("rect").data(o).enter().append("rect").attr("class","prob-rect").attr("x",(function(t){return s(t.q)})).attr("width",s.bandwidth()).attr("y",(function(t){return p(t.p)})).attr("height",(function(e){return a-t.props.margin.bottom-t.props.margin.top-p(e.p)})),c.append("text").classed("title",!0).text("Mutations in ".concat(this.props.numberOfDays," day(s)"))}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement("svg",{ref:function(e){return t.node=e},viewBox:"0 0 ".concat(this.props.size[0]," ").concat(this.props.size[1])}))}}]),e}(r.a.Component),E=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(l.a)(e).call(this,t))).drawPlot=n.drawPlot.bind(Object(u.a)(n)),n}return Object(m.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.drawPlot()}},{key:"componentDidUpdate",value:function(){this.drawPlot()}},{key:"drawPlot",value:function(){var t=b.b(g.gamma.pdf),e=this.props.evolutionaryRate*this.props.genomeLength/365,n=t(b.a,this.props.numberOfMutations,1/e),a=w(n,1.5),r=this.props.size[0],i=this.props.size[1],o=this.node,s=f.h(o).style("font","10px sans-serif"),p=f.g().range([this.props.margin.left,r-this.props.margin.left-this.props.margin.right]).domain([0,f.e(a.filter((function(t){return t.p>.001})),(function(t){return t.q}))]),c=f.g().range([i-this.props.margin.top-this.props.margin.bottom,this.props.margin.bottom]).domain([0,f.e(a,(function(t){return t.p}))]),l=f.d().x((function(t){return p(t.q)})).y((function(t){return c(t.p)}));s.selectAll("g").remove(),s.append("g").attr("transform","translate(".concat(this.props.margin.left,",").concat(this.props.margin.top,")"));var u=s.select("g");x(u,p,c,this.props.size,this.props.margin,"Number of days between sampling","Probability density"),u.append("path").datum(a).attr("class","line").attr("d",l),u.append("text").classed("title",!0).text("Days to ".concat(this.props.numberOfMutations," mutation(s)"))}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement("svg",{ref:function(e){return t.node=e},viewBox:"0 0 ".concat(this.props.size[0]," ").concat(this.props.size[1])}))}}]),e}(r.a.Component),j=n(30),k=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(l.a)(e).call(this,t))).drawPlot=n.drawPlot.bind(Object(u.a)(n)),n}return Object(m.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.drawPlot()}},{key:"componentDidUpdate",value:function(){this.drawPlot()}},{key:"drawPlot",value:function(){var t=this,e=b.b(this.props.pdf),n=this.props.size[0],a=this.props.size[1],r=this.node,i=f.h(r).style("font","10px sans-serif"),o=w(e.apply(void 0,[b.a].concat(Object(j.a)(this.props.params))),.01).filter((function(t){return isFinite(t.p)})),s=f.g().range([this.props.margin.left,n-this.props.margin.left-this.props.margin.right]).domain([0,f.e(o,(function(t){return t.q}))]),p=f.g().range([a-this.props.margin.top-this.props.margin.bottom,this.props.margin.bottom]).domain([0,f.e(o,(function(t){return t.p}))]),c=f.d().x((function(t){return s(t.q)})).y((function(t){return p(t.p)})),l=f.a().x((function(t){return s(t.q)})).y0(a-this.props.margin.bottom-this.props.margin.top).y1((function(t){return p(t.p)}));i.selectAll("g").remove(),i.append("g").attr("transform","translate(".concat(this.props.margin.left,",").concat(this.props.margin.top,")"));var u=i.select("g");x(u,s,p,this.props.size,this.props.margin,"Days post infection onset","Probability density"),"Number of Days"===this.props.fixOn&&u.append("path").datum(o.filter((function(e){return e.q<=t.props.numberOfDays}))).attr("class","area").attr("d",l),u.append("path").datum(o).attr("class","line").attr("d",c),u.append("text").classed("title",!0).text("Serial Interval")}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement("svg",{ref:function(e){return t.node=e},viewBox:"0 0 ".concat(this.props.size[0]," ").concat(this.props.size[1])}))}}]),e}(r.a.Component),D=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(l.a)(e).call(this,t))).drawPlot=n.drawPlot.bind(Object(u.a)(n)),n}return Object(m.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.drawPlot()}},{key:"componentDidUpdate",value:function(){this.drawPlot()}},{key:"drawPlot",value:function(){var t=this,e=b.b((function(t,e,n,a){return t(n,a*e[0],e[1])}))(this.props.cdf,this.props.params,this.props.numberOfDays),n=w(e,1,.001,1);n.push({q:0,p:1-this.props.cdf(this.props.numberOfDays,this.props.params[0],this.props.params[1]),pOnly:1-this.props.cdf(this.props.numberOfDays,this.props.params[0],this.props.params[1])}),n.sort((function(t,e){return t.q-e.q}));for(var a=0,r=n.length-1;r>=1;--r)n[r].pOnly=n[r].p-a,a+=n[r].pOnly;var i=this.props.size[0],o=this.props.size[1],s=this.node,p=f.h(s).style("font","10px sans-serif"),c=f.f().range([this.props.margin.left,i-this.props.margin.left-this.props.margin.right]).padding(.1).domain(n.map((function(t){return t.q}))),l=f.g().range([o-this.props.margin.top-this.props.margin.bottom,this.props.margin.bottom]).domain([0,1]);p.selectAll("g").remove(),p.append("g").attr("transform","translate(".concat(this.props.margin.left,",").concat(this.props.margin.top,")"));var u=p.select("g");x(u,c,l,this.props.size,this.props.margin,"Number of transmission events","Probability",c.domain().filter((function(t,e){return!(e%2)}))),u.selectAll("rect").data(n).enter().append("rect").attr("class","prob-rect").attr("x",(function(t){return c(t.q)})).attr("width",c.bandwidth()).attr("y",(function(t){return l(t.pOnly)})).attr("height",(function(e){return o-t.props.margin.bottom-t.props.margin.top-l(e.pOnly)})),u.append("text").classed("title",!0).text("Transmission events in ".concat(this.props.numberOfDays," days"))}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement("svg",{ref:function(e){return t.node=e},viewBox:"0 0 ".concat(this.props.size[0]," ").concat(this.props.size[1])}))}}]),e}(r.a.Component),z=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(l.a)(e).call(this,t))).drawPlot=n.drawPlot.bind(Object(u.a)(n)),n}return Object(m.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.drawPlot()}},{key:"componentDidUpdate",value:function(){this.drawPlot()}},{key:"drawPlot",value:function(){var t=this,e=this.props.evolutionaryRate*this.props.genomeLength/365,n=b.b(g.gamma.pdf)(b.a,this.props.numberOfMutations,1/e),a=b.b(g.gamma.cdf),r=w((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.props.params,i=a(b.a,e*r[0],r[1]),o=function(t){return i(t)*n(t)};return O(o,[0,500],1e3)}),1,.001,1);r.push({q:0,p:1-r[1].p,pOnly:1-r[1].p}),r.sort((function(t,e){return t.q-e.q}));for(var i=0,o=r.length-1;o>=1;--o)r[o].pOnly=r[o].p-i,i+=r[o].pOnly;r.pop();var s=this.props.size[0],p=this.props.size[1],c=this.node,l=f.h(c).style("font","10px sans-serif"),u=f.f().range([this.props.margin.left,s-this.props.margin.left-this.props.margin.right]).padding(.1).domain(r.map((function(t){return t.q}))),m=f.g().range([p-this.props.margin.top-this.props.margin.bottom,this.props.margin.bottom]).domain([0,f.e(r,(function(t){return t.pOnly}))]);l.selectAll("g").remove(),l.append("g").attr("transform","translate(".concat(this.props.margin.left,",").concat(this.props.margin.top,")"));var d=l.select("g");d.selectAll("rect").data(r).enter().append("rect").attr("class","prob-rect").attr("x",(function(t){return u(t.q)})).attr("width",u.bandwidth()).attr("y",(function(t){return m(t.pOnly)})).attr("height",(function(e){return p-t.props.margin.bottom-t.props.margin.top-m(e.pOnly)})),x(d,u,m,this.props.size,this.props.margin,"Number of transmission events","Probability",u.domain().filter((function(t,e){return!(e%5)}))),d.append("text").classed("title",!0).text("Transmission events for ".concat(this.props.numberOfMutations," mutation(s)"))}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement("svg",{ref:function(e){return t.node=e},viewBox:"0 0 ".concat(this.props.size[0]," ").concat(this.props.size[1])}))}}]),e}(r.a.Component),N=(n(80),n(81),function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(l.a)(e).call(this,t))).updateOnSelection=n.updateOnSelection.bind(Object(u.a)(n)),n.state={evolutionaryRate:9e-4,genomeLength:3e4,conditionalOptions:["Number of Mutations","Number of Days"],selectedOption:"Number of Mutations",numberOfMutations:1,numberOfDays:1,distributionOptions:["Gamma"],distributionSelection:"Gamma",distributionParameters:[1.5,3]},n}return Object(m.a)(e,t),Object(p.a)(e,[{key:"updateOnSelection",value:function(t,e,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r={},i=a?parseFloat(n.target.value):n.target.value;Array.isArray(this.state[t])?(r[t]=this.state[t].slice(),r[t][e]=i):r[t]=i,this.setState(r)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement(h,{evolutionaryRate:this.state.evolutionaryRate,updater:this.updateOnSelection,genomeLength:this.state.genomeLength,options:this.state.conditionalOptions,selectedOption:this.state.selectedOption,numberOfDays:this.state.numberOfDays,numberOfMutations:this.state.numberOfMutations,distributionOptions:this.state.distributionOptions,distributionSelection:this.state.distributionSelection,distributionParameters:this.state.distributionParameters})),r.a.createElement("div",{className:"plot"},r.a.createElement(k,{size:[400,500],margin:{top:50,right:50,bottom:50,left:50},params:this.state.distributionParameters,pdf:v[this.state.distributionSelection],numberOfDays:this.state.numberOfDays,fixOn:this.state.selectedOption})),"Number of Mutations"===this.state.selectedOption?r.a.createElement("div",{className:"plot"},r.a.createElement(E,{size:[400,500],margin:{top:50,right:50,bottom:50,left:50},genomeLength:this.state.genomeLength,evolutionaryRate:this.state.evolutionaryRate,numberOfMutations:this.state.numberOfMutations})):r.a.createElement("div",{className:"plot"},r.a.createElement(P,{size:[400,500],margin:{top:50,right:50,bottom:50,left:50},genomeLength:this.state.genomeLength,evolutionaryRate:this.state.evolutionaryRate,numberOfDays:this.state.numberOfDays})),"Number of Days"===this.state.selectedOption?r.a.createElement("div",{className:"plot"},r.a.createElement(D,{size:[400,500],margin:{top:50,right:50,bottom:50,left:50},params:this.state.distributionParameters,cdf:y[this.state.distributionSelection],numberOfDays:this.state.numberOfDays})):r.a.createElement("div",{className:"plot"},r.a.createElement(z,{size:[400,500],margin:{top:50,right:50,bottom:50,left:50},params:this.state.distributionParameters,genomeLength:this.state.genomeLength,evolutionaryRate:this.state.evolutionaryRate,cdf:y[this.state.distributionSelection],numberOfMutations:this.state.numberOfMutations})),r.a.createElement("div",null)))}}]),e}(a.Component)),M=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function L(t){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(t){console.error("Error during service worker registration:",t)}))}o.a.render(r.a.createElement(N,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/estimate-number-of-transmission",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/estimate-number-of-transmission","/service-worker.js");M?(!function(t){fetch(t).then((function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):L(t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):L(t)}))}}()}},[[73,1,2]]]);
//# sourceMappingURL=main.899aae0f.chunk.js.map